<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="CMake presetsIntroductionCMake presets are a collection of configuration, build and test options for a CMake project. These options are described in two JSON files named CMakePreset.json and CMakeUser">
<meta property="og:type" content="article">
<meta property="og:title" content="Configure and build with CMake Presets in Visual Studio Code">
<meta property="og:url" content="http://example.com/2022/CMakePresets-And-VSCode/index.html">
<meta property="og:site_name" content="BHL Notes">
<meta property="og:description" content="CMake presetsIntroductionCMake presets are a collection of configuration, build and test options for a CMake project. These options are described in two JSON files named CMakePreset.json and CMakeUser">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2022/CMakePresets-And-VSCode/cmake-add-presets.png">
<meta property="og:image" content="http://example.com/2022/CMakePresets-And-VSCode/debug.png">
<meta property="og:image" content="http://example.com/2022/CMakePresets-And-VSCode/run.png">
<meta property="article:published_time" content="2022-12-22T01:00:00.000Z">
<meta property="article:modified_time" content="2022-12-26T15:02:58.738Z">
<meta property="article:author" content="Bing Han Lin">
<meta property="article:tag" content="Uncategorized">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/CMakePresets-And-VSCode/cmake-add-presets.png">

<link rel="canonical" href="http://example.com/2022/CMakePresets-And-VSCode/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Configure and build with CMake Presets in Visual Studio Code | BHL Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">BHL Notes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">MY LEARNING TRAJECTORY</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/CMakePresets-And-VSCode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bing Han Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BHL Notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Configure and build with CMake Presets in Visual Studio Code
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-12-22 09:00:00" itemprop="dateCreated datePublished" datetime="2022-12-22T09:00:00+08:00">2022-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-12-26 23:02:58" itemprop="dateModified" datetime="2022-12-26T23:02:58+08:00">2022-12-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="CMake-presets"><a href="#CMake-presets" class="headerlink" title="CMake presets"></a>CMake presets</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>CMake presets are a collection of configuration, build and test options for a CMake project. These options are described in two JSON files named <strong>CMakePreset.json</strong> and <strong>CMakeUserPresets.json</strong> respectively. They both live in the project’s root directory and have exactly the same schema. The difference between them is that the former is meant to specify <strong>project-wide</strong> build details, while the latter is meant for <strong>developers own local build details</strong>.</p>
<span id="more"></span>

<p>Therefore, the common options that shared with others are written in the <strong>CMakePreset.json</strong> and can be commited into version control. The specific options are defined by each developers in <strong>CMakeUserPresets.json</strong>, and for this reason, it’s important not to add <strong>CMakeUserPresets.json</strong> into version control.</p>
<p>This enables developers to share build knowledge both with others and with build instances such as continuous integration (CI).</p>
<h2 id="CMake-Preset-Sections"><a href="#CMake-Preset-Sections" class="headerlink" title="CMake Preset Sections"></a>CMake Preset Sections</h2><p>The CMake presets files are JSON documents with an object as the root and describe the following sections: </p>
<ul>
<li><p>Configuration: The data that’s normally passed on the command line to the CMake executable. Examples of this include options, environment variables, toolchain information, and generator information (Visual Studio&#x2F;Xcode projects).</p>
</li>
<li><p>Build: A list of targets to build, along with other minor build options describing how to drive the compiler.</p>
</li>
<li><p>Test: Instructions on how to execute CTest. Information such as which tests to run, how to output the results, and what to do when a failure occurs.</p>
</li>
</ul>
<h2 id="CMake-Presets-Inheritance"><a href="#CMake-Presets-Inheritance" class="headerlink" title="CMake Presets Inheritance"></a>CMake Presets Inheritance</h2><p>A preset can inherit from another preset that is defined in the same file or in the files it <strong>includes</strong> with unlimited levels. The preset will inherit all of the fields from the inherits presets by default (except name description, and displayName), but can override them as desired.</p>
<p>If CMakePresets.json and CMakeUserPresets.json are both present in the same directory, CMakeUserPresets.json <strong>implicitly includes</strong> CMakePresets.json. Then presets in CMakePresets.json may be inherited by presets in CMakeUserPresets.json.</p>
<h2 id="Better-Integration-with-IDEs"><a href="#Better-Integration-with-IDEs" class="headerlink" title="Better Integration with IDEs"></a>Better Integration with IDEs</h2><p>With CMake presets, all the dependencies and recipes are held in a parsable JSON format, meaning that tools can read them, too. Besides passing CMake presets to CMake CLI directly, many IDEs start to integrate CMake presets in their tools. Microsoft start CMake presets support in <a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/cpp/build/cmake-presets-vs?view=msvc-170">Visual Studio 2019</a>  and <a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode-cmake-tools">VS Code CMake plugin</a>. JetBrains team also brings this feature to [CLion].(<a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/clion/cmake-presets.html">https://www.jetbrains.com/help/clion/cmake-presets.html</a>).</p>
<p>Every developer can choose what text editors, IDEs, and tools they want to use to perform their job. That means we have many people working on&#x2F;with different platforms, , etc.</p>
<p>All this means less setup for the developer, less chance of human error and making sure we’re all developing with reproducible results. The final directory structure will becomes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--|</span><br><span class="line">  |--.vscode</span><br><span class="line">  |  |</span><br><span class="line">  |  |--launch.json</span><br><span class="line">  |</span><br><span class="line">  |--helloWorld.cpp</span><br><span class="line">  |--CMakeLists.txt</span><br><span class="line">  |--CMakePresets.json</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Using-CMake-Presets-in-Visual-Studio-Code"><a href="#Using-CMake-Presets-in-Visual-Studio-Code" class="headerlink" title="Using CMake Presets in Visual Studio Code"></a>Using CMake Presets in Visual Studio Code</h1><p>In this secion, i will show you using Visual Studio Code and it extension to configurate and build a simple CMake project with CMake presets.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>To complete the tutorial in the following section, install the following:</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/download">Visual Studio Code</a>.</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">C++ extension for VS Code</a>.</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools">CMake Tools extension for VS Code</a>.</li>
<li>CMake 3.20 above.</li>
<li>Visual Studio build tool.</li>
</ol>
<h2 id="Enable-CMake-Preset-option"><a href="#Enable-CMake-Preset-option" class="headerlink" title="Enable CMake Preset option"></a>Enable CMake Preset option</h2><p>First of all, you need to enablbe CMake preset option in <strong>CMake Tools</strong> settings section. Change the value to <strong>always</strong> to use CMake preset file explicitly.</p>
<table>
<thead>
<tr>
<th align="center">Setting</th>
<th align="center">Description</th>
<th align="center">Accepted values</th>
</tr>
</thead>
<tbody><tr>
<td align="center">cmake.useCMakePresets</td>
<td align="center">Use CMakePresets.json to drive CMake configure, build, and test</td>
<td align="center">always, never, auto</td>
</tr>
</tbody></table>
<h2 id="Prepare-CMake-Porject"><a href="#Prepare-CMake-Porject" class="headerlink" title="Prepare CMake Porject"></a>Prepare CMake Porject</h2><ul>
<li><p><strong>Add a source code file:</strong> Create a new file and name the file <strong>helloWorld.cpp</strong>. Here i display a cylinder in VTK interactive render window.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkActor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkCamera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkCylinderSource.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkNew.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkPolyDataMapper.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkProperty.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkRenderWindow.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkRenderWindowInteractor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkRenderer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span>, <span class="type">char</span> *[])</span> </span>&#123;</span><br><span class="line">  vtkNew&lt;vtkCylinderSource&gt; cylinder;</span><br><span class="line">  cylinder-&gt;<span class="built_in">SetResolution</span>(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">  vtkNew&lt;vtkPolyDataMapper&gt; cylinderMapper;</span><br><span class="line">  cylinderMapper-&gt;<span class="built_in">SetInputConnection</span>(cylinder-&gt;<span class="built_in">GetOutputPort</span>());</span><br><span class="line"></span><br><span class="line">  vtkNew&lt;vtkActor&gt; cylinderActor;</span><br><span class="line">  cylinderActor-&gt;<span class="built_in">SetMapper</span>(cylinderMapper);</span><br><span class="line">  cylinderActor-&gt;<span class="built_in">RotateX</span>(<span class="number">30.0</span>);</span><br><span class="line">  cylinderActor-&gt;<span class="built_in">RotateY</span>(<span class="number">-45.0</span>);</span><br><span class="line"></span><br><span class="line">  vtkNew&lt;vtkRenderer&gt; renderer;</span><br><span class="line">  renderer-&gt;<span class="built_in">AddActor</span>(cylinderActor);</span><br><span class="line">  renderer-&gt;<span class="built_in">ResetCamera</span>();</span><br><span class="line">  renderer-&gt;<span class="built_in">GetActiveCamera</span>()-&gt;<span class="built_in">Zoom</span>(<span class="number">1.5</span>);</span><br><span class="line"></span><br><span class="line">  vtkNew&lt;vtkRenderWindow&gt; renderWindow;</span><br><span class="line">  renderWindow-&gt;<span class="built_in">SetSize</span>(<span class="number">300</span>, <span class="number">300</span>);</span><br><span class="line">  renderWindow-&gt;<span class="built_in">AddRenderer</span>(renderer);</span><br><span class="line">  renderWindow-&gt;<span class="built_in">SetWindowName</span>(<span class="string">&quot;Cylinder&quot;</span>);</span><br><span class="line"></span><br><span class="line">  vtkNew&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor;</span><br><span class="line">  renderWindowInteractor-&gt;<span class="built_in">SetRenderWindow</span>(renderWindow);</span><br><span class="line"></span><br><span class="line">  renderWindow-&gt;<span class="built_in">Render</span>();</span><br><span class="line">  renderWindowInteractor-&gt;<span class="built_in">Start</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Add CMakeLists.txt:</strong> Create a CMakeLists.txt file in root directory with the following content.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.20.0)</span><br><span class="line"></span><br><span class="line">project(helloWorld LANGUAGES CXX)</span><br><span class="line"></span><br><span class="line">find_package(VTK COMPONENTS </span><br><span class="line">    vtkCommonColor</span><br><span class="line">    vtkCommonCore</span><br><span class="line">    vtkFiltersSources</span><br><span class="line">    vtkInteractionStyle</span><br><span class="line">    vtkRenderingContextOpenGL2</span><br><span class="line">    vtkRenderingCore</span><br><span class="line">    vtkRenderingFreeType</span><br><span class="line">    vtkRenderingGL2PSOpenGL2</span><br><span class="line">    vtkRenderingOpenGL2</span><br><span class="line">    QUIET</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">set(CMAKE_CXX_STANDARD 17)</span><br><span class="line"></span><br><span class="line">set(CMAKE_RUNTIME_OUTPUT_DIRECTORY  $&#123;PROJECT_BINARY_DIR&#125;/bin)</span><br><span class="line">set(CMAKE_LIBRARY_OUTPUT_DIRECTORY $&#123;PROJECT_BINARY_DIR&#125;/lib )</span><br><span class="line"></span><br><span class="line">add_executable($&#123;PROJECT_NAME&#125;  </span><br><span class="line">    helloWorld.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">target_link_libraries($&#123;PROJECT_NAME&#125; </span><br><span class="line">    PRIVATE </span><br><span class="line">        $&#123;VTK_LIBRARIES&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">vtk_module_autoinit(</span><br><span class="line">    TARGETS $&#123;PROJECT_NAME&#125;</span><br><span class="line">    MODULES $&#123;VTK_LIBRARIES&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>Now, the directory structure looks like:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--|</span><br><span class="line">  |--helloWorld.cpp</span><br><span class="line">  |--CMakeLists.txt</span><br></pre></td></tr></table></figure>
<h2 id="Configure-And-Build"><a href="#Configure-And-Build" class="headerlink" title="Configure And Build"></a>Configure And Build</h2><h3 id="Create-Presets"><a href="#Create-Presets" class="headerlink" title="Create Presets"></a>Create Presets</h3><p>Run <strong>CMake: Add Configure Preset</strong> from the command palette and choose <strong>Create from compilers</strong>. With Visual Studio build tool installed on your computer, CMake Tools lists the available kits for preset. Select one of the kit from the list to create CMakePresets.json in the root directory. In this article i choose <strong>Visual Studio 2019 x64</strong> for the preset, both configure preset and build preset are generate in the CMakePresets.json.</p>
<p><img src="/2022/CMakePresets-And-VSCode/cmake-add-presets.png"></p>
<p>Now, you have a CMakePresets.json similar to the json data below. Remember to add <strong>VTK_DIR</strong> in  section <strong>cacheVariable</strong>, so VTK　library can be found. If you want to output the binary files in specific place, modify the value in key <strong>binaryDir</strong>.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurePresets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VS2019_x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Visual Studio Community 2019 Release - amd64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Using compilers for Visual Studio 16 2019 (x64 architecture)&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;generator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Visual Studio 16 2019&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;toolset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;host=x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;architecture&quot;</span><span class="punctuation">:</span> <span class="string">&quot;x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;binaryDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;sourceDir&#125;/out/build/$&#123;presetName&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cacheVariables&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;VTK_DIR&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;PATH_TO_YOUR_VTK_DIR&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_INSTALL_PREFIX&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;sourceDir&#125;/out/install/$&#123;presetName&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_C_COMPILER&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cl.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_CXX_COMPILER&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cl.exe&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;buildPresets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VS2019_x64-debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Visual Studio Community 2019 Release - amd64 - Debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;configurePreset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VS2019_x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>The directory structure after this ste is:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--|</span><br><span class="line">  |--helloWorld.cpp</span><br><span class="line">  |--CMakeLists.txt</span><br><span class="line">  |--CMakePresets.json</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Configure-CMake-Project"><a href="#Configure-CMake-Project" class="headerlink" title="Configure CMake Project"></a>Configure CMake Project</h3><p>Run <strong>CMake: Select Configure Preset</strong> and select one of the configure presets defined in the CMakePresets.json and CMakeUserPresets.json. To configure the project, run <strong>CMake: Configure</strong> to configure the project with the active configure preset. This is the same as running <strong>cmake –preset <configurePreset></strong> from the command line. The configuration files will be created in <strong>binaryDir</strong> defined in the configure preset.</p>
<h3 id="Build-CMake-Project"><a href="#Build-CMake-Project" class="headerlink" title="Build CMake Project"></a>Build CMake Project</h3><p>Run <strong>CMake: Select Build Preset</strong> and select one of the build presets defined in the CMakePresets.json and CMakeUserPresets.json. To build the project, run <strong>CMake: Build</strong> to build the project with the active budil preset. This is the same as running <strong>cmake –build –preset <buildPreset></strong> from the command line. The binary files will be created in <strong>binaryDir</strong> defined in the configure preset.</p>
<h1 id="Run-And-Debug"><a href="#Run-And-Debug" class="headerlink" title="Run And Debug"></a>Run And Debug</h1><p>After the project are built, the developer would like to test and debug the progarm. Visual Studio Code supports the debugging function with the following debuggers for C&#x2F;C++:</p>
<ul>
<li><strong>Linux:</strong> GDB</li>
<li><strong>macOS:</strong> LLDB or GDB</li>
<li><strong>Windows:</strong> the Visual Studio Windows Debugger or GDB (using Cygwin or MinGW)</li>
</ul>
<p>The launch.json file in .vscode folder is used to set up the basics of your debugger and debugging environment. To add a debug configuration, run <strong>C&#x2F;C++: Add Debug Configuration</strong> and select your prefer configuration. In this article, i choose,<strong>(Windows) Launch</strong>, the default configuration for Windows as our debug configuration. Then change the three places in the launch.json file:</p>
<ul>
<li><strong>program</strong>: The executable or file to run when launching the debugger. Set it to <code>&quot;$&#123;command:cmake.launchTargetPath&#125;&quot;</code>.</li>
<li><strong>program</strong>: The working directory for finding dependencies and other files. Set it to <code>&quot;$&#123;command:cmake.launchTargetDirectory&#125;&quot;</code>.</li>
<li><strong>environment</strong>: The environment variables settings. Add the path of directory contains VTK dlls, so the program can load the library when debugging.</li>
</ul>
<p>Below is an example of debug configuration using in this article:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(Windows) Launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppvsdbg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;command:cmake.launchTargetPath&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;command:cmake.launchTargetDirectory&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PATH&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$PATH;$&#123;command:cmake.launchTargetDirectory&#125;;&lt;PATH_TO_YOUR_VTK_BIN_DIR&gt;&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;console&quot;</span><span class="punctuation">:</span> <span class="string">&quot;externalTerminal&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>For more information about Visual Studio Code debugging, please visit <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/cpp/cpp-debug">link</a>.</p>
<p>Choose the debug configuration and start the program. Our hello world program is executed under the enviroment defined above.</p>
<p><img src="/2022/CMakePresets-And-VSCode/debug.png"></p>
<p><img src="/2022/CMakePresets-And-VSCode/run.png"></p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>I hope you now understand how to use CMake presets in in Visual Studio Code. CMake Preset ensure that multiple configurations remain consistent among the developers and reduce number of mistakes that may occur. CMake Tools extension provide many convient method to work with CMake Preset in Visual Studio Code. Using them properly can increase can reduce simplicity for everyone working on the project!</p>
<p>Many topics can’t be covered in this article, such as CMake Presets Inheritance, CMakeUserPresets.json and debugger extensions. These topic can be found in the reference list.</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/manual/cmake-presets.7.html">https://cmake.org/cmake/help/latest/manual/cmake-presets.7.html</a><br><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/cpp/cmake-linux">https://code.visualstudio.com/docs/cpp/cmake-linux</a><br><a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode-cmake-tools">https://github.com/microsoft/vscode-cmake-tools</a><br><a target="_blank" rel="noopener" href="https://vector-of-bool.github.io/docs/vscode-cmake-tools/index.html">https://vector-of-bool.github.io/docs/vscode-cmake-tools/index.html</a><br><a target="_blank" rel="noopener" href="https://www.kdab.com/the-power-of-cmake-presets/">https://www.kdab.com/the-power-of-cmake-presets/</a><br><a target="_blank" rel="noopener" href="https://www.nanoframework.net/build-updated-to-cmake-presets/">https://www.nanoframework.net/build-updated-to-cmake-presets/</a><br><a target="_blank" rel="noopener" href="https://pspdfkit.com/blog/2021/cmake-presets-in-practice/">https://pspdfkit.com/blog/2021/cmake-presets-in-practice/</a><br><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/debugging#_debugger-extensions">https://code.visualstudio.com/docs/editor/debugging#_debugger-extensions</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Uncategorized/" rel="tag"># Uncategorized</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/Iterative-Methods-Based-On-Splitting-Matrix/" rel="prev" title="Iterative Methods Based On Splitting Matrix">
      <i class="fa fa-chevron-left"></i> Iterative Methods Based On Splitting Matrix
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/Simeple-VTK-Transform-Widget/" rel="next" title="Implement a Simple VTK Transform Widget">
      Implement a Simple VTK Transform Widget <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#CMake-presets"><span class="nav-number">1.</span> <span class="nav-text">CMake presets</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction"><span class="nav-number">1.1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CMake-Preset-Sections"><span class="nav-number">1.2.</span> <span class="nav-text">CMake Preset Sections</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CMake-Presets-Inheritance"><span class="nav-number">1.3.</span> <span class="nav-text">CMake Presets Inheritance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Better-Integration-with-IDEs"><span class="nav-number">1.4.</span> <span class="nav-text">Better Integration with IDEs</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Using-CMake-Presets-in-Visual-Studio-Code"><span class="nav-number">2.</span> <span class="nav-text">Using CMake Presets in Visual Studio Code</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Prerequisites"><span class="nav-number">2.1.</span> <span class="nav-text">Prerequisites</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Enable-CMake-Preset-option"><span class="nav-number">2.2.</span> <span class="nav-text">Enable CMake Preset option</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Prepare-CMake-Porject"><span class="nav-number">2.3.</span> <span class="nav-text">Prepare CMake Porject</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Configure-And-Build"><span class="nav-number">2.4.</span> <span class="nav-text">Configure And Build</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-Presets"><span class="nav-number">2.4.1.</span> <span class="nav-text">Create Presets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configure-CMake-Project"><span class="nav-number">2.4.2.</span> <span class="nav-text">Configure CMake Project</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Build-CMake-Project"><span class="nav-number">2.4.3.</span> <span class="nav-text">Build CMake Project</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Run-And-Debug"><span class="nav-number">3.</span> <span class="nav-text">Run And Debug</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Conclusion"><span class="nav-number">4.</span> <span class="nav-text">Conclusion</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">5.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Bing Han Lin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/BingHanLin" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;BingHanLin" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://https//www.linkedin.com/in/binghanlin/" title="Linkedin → https:&#x2F;&#x2F;https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;binghanlin&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin-in fa-fw"></i>Linkedin</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bing Han Lin</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
